{
    "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
    "layer": [
      {
        "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white", "strokeWidth": 0.5},
        "data": {
        "url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/js/STE_2021_AUST_GDA94.json",
        "format": {"type": "topojson", "feature": "STE_2021_AUST_GDA94"}
        }
      },
    {
      "mark": {"type": "rule", "fill": "black", "opacity": 0.3, "strokeWidth": 0.3},
          "data": {"url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/data/timely.csv"},
      "transform": [
      {"filter": {"param": "org", "empty": false}},
      {
        "lookup": "Departing",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/data/airportlocations.csv"
      },
      "key": "airport",
      "fields": ["latitude", "longitude"]
          },
          "as": ["origin_latitude", "origin_longitude"]
        },
        {
         "lookup": "Arriving",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/data/airportlocations.csv"
      },
      "key": "airport",
      "fields": ["latitude", "longitude"]
          },
          "as": ["dest_latitude", "dest_longitude"]
        }
      ],
      "encoding": {
        "longitude": {"field": "origin_longitude"},
        "latitude": {"field": "origin_latitude"},
        "longitude2": {"field": "dest_longitude"},
        "latitude2": {"field": "dest_latitude"}
      }
    },
      { 
        "mark": {"type": "circle", "opacity": 1},
        "data": {
          "url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/data/timely.csv"
      },
      "transform": [
        {
          "lookup": "Departing",
          "from": {
            "data": {"url": "https://raw.githubusercontent.com/BCohen7/Assignmenttwo2025/refs/heads/main/data/airportlocations.csv"},
            "key": "airport",
            "fields": ["latitude", "longitude"]
          }
        }
      ],
        "params": [{
        "name": "org",
        "select": {
          "type": "point",
          "on": "pointerover",
          "nearest": true,
          "fields": ["airport"]
        }
      }],
      "encoding": {
        "longitude": {"field": "longitude"},
        "latitude": {"field": "latitude"},
        "size": {"value": 100}
      }
    }
  ],
  "projection": {"type": "equirectangular"},
  "width": 800,
  "height": 450
}

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Defining meta data and the title-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Top 100 Golf Courses in Australia</title>

    <!-- Calling Pure.css-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/grids-responsive-min.css" />

    <!-- Pulling the style sheet-->
    <link rel = "stylesheet" href="css/styles.css">
    
    <!-- Vega-lite format pull-->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
</head>

<body>
        <!-- Creating the headerbar-->
        <header class="titlebar">
            <h1>The Top 100 Golf Courses of Australia</h1>
        </header>

        <!-- Creating the first row of the grid-->
        <div class="pure-g">
            <div id = "vis1" class="pure-u-3-5"></div>
            <div id = "vis2" class="pure-u-2-5"></div>
        </div>

        <!-- Creating the second full length tile-->
        <div id = "tube" class="pure-g">
            <div id = "vis3" class="pure-u-1-1"></div>
        </div>
        

    <script type="text/javascript">
// Create a variable for the filter value to be stored within
var xFunction;

var pullOne = "symbolmap.json"; // Import the map to be sent to figure

// Once the map has been inserted to the HTML, we can pull its view to inspect for any X filter
vegaEmbed('#vis1', pullOne).then(function(result) {
    // Access the Vega View instance
    var view = result.view;

    // Pull the X_Select value
    view.addEventListener('click', function(event, item) {
        var selectedRange = num.toString(item.datum.XSelect);
        xFunction(selectedRange);
    });
}).catch(console.error);

// Now the bar chart can be imported, sent to figure, but checked for the filter on the way
var pullTwo = "barchart.json" // Import the bar chart to be sent to figure

vegaEmbed('#vis2', pullTwo).then(function(result) {
    // Access the Vega View instance
    var view = result.view

    // Push the state that is caught on click into the value to filter the chart
    xHold = function updateParameter(newValue) {
        view.signal('XSelect', newValue).run();
    }
})

// Now import the tube of public/privae
var pullThree = "slider.json"

vegaEmbed('#vis3', pullThree)
    </script>
</body>
</html>